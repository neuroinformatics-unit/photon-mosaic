
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuration &#8212; photon-mosaic</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8d03875c" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=000c92bf"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/configuration';</script>
    <link rel="canonical" href="https://photon-mosaic.neuroinformatics.dev/user_guide/configuration.html" />
    <link rel="icon" href="../_static/light-logo-niu.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt=""/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">photon-mosaic v0.2.2</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api_index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/photon-mosaic" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://neuroinformatics.zulipchat.com/#narrow/channel/500681-photon-mosaic" title="Zulip (chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (chat)</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api_index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/photon-mosaic" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://neuroinformatics.zulipchat.com/#narrow/channel/500681-photon-mosaic" title="Zulip (chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (chat)</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Configuration</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="configuration">
<span id="user-guide-configuration"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h1>
<p>The configuration system in <code class="docutils literal notranslate"><span class="pre">photon-mosaic</span></code> is designed to be flexible and user-friendly. It allows you to customize the behavior of the pipeline at different levels.</p>
<section id="configuration-files">
<h2>Configuration Files<a class="headerlink" href="#configuration-files" title="Link to this heading">#</a></h2>
<section id="user-configuration">
<h3>User Configuration<a class="headerlink" href="#user-configuration" title="Link to this heading">#</a></h3>
<p>On first run, photon-mosaic will create a user config at <code class="docutils literal notranslate"><span class="pre">~/.photon_mosaic/config.yaml</span></code> if it does not exist. This serves as your default configuration.</p>
<p>The default config expects you to run the pipeline in the directory that contains the raw data and will create a <code class="docutils literal notranslate"><span class="pre">derivatives</span></code> directory its root directory, following <code class="docutils literal notranslate"><span class="pre">NeuroBlueprint</span></code> conventions. It is advised to specify the paths for the raw and processed data using the <code class="docutils literal notranslate"><span class="pre">raw_data_base</span></code> and <code class="docutils literal notranslate"><span class="pre">processed_data_base</span></code> parameters on the first run via the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>photon-mosaic<span class="w"> </span>--raw_data_base<span class="w"> </span>/my/raw_data<span class="w"> </span>--processed_data_base<span class="w"> </span>/my/derivatives
</pre></div>
</div>
<p>After the first run, you can edit the config file to your liking by manually opening the file and editing it or using command line arguments. You will be able to run photon-mosaic without specifying the paths again, by just running <code class="docutils literal notranslate"><span class="pre">photon-mosaic</span></code>.</p>
<p>In case you want to reset the config to the default values, you can run <code class="docutils literal notranslate"><span class="pre">photon-mosaic</span> <span class="pre">--reset-config</span></code>. You can also specify the paths to raw and derivative again with the appropriate flags.</p>
<p>If you want to store your config file somewhere else, you can specify the path to the config file with the <code class="docutils literal notranslate"><span class="pre">--config</span></code> flag.</p>
<p>The config file that is used for each run (with any overrides) is exported to <code class="docutils literal notranslate"><span class="pre">derivatives/photon-mosaic/configs/YYYYMMDD_HHMMSS_config.yaml</span></code>.</p>
</section>
</section>
<section id="configuration-structure">
<h2>Configuration Structure<a class="headerlink" href="#configuration-structure" title="Link to this heading">#</a></h2>
<p>The configuration file is organized into several main sections. Here is a simplified example showing the key sections:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data paths</span>
<span class="nt">raw_data_base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;path/to/raw_data/&quot;</span>
<span class="nt">processed_data_base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;path/to/derivatives/&quot;</span>

<span class="c1"># Dataset discovery settings</span>
<span class="nt">dataset_discovery</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^.*$&quot;</span>
<span class="w">  </span><span class="nt">tiff_patterns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*.tif&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">exclude_datasets</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;.*_test$&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;.*_backup$&quot;</span>
<span class="w">    </span><span class="nt">exclude_sessions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="c1"># Preprocessing configuration</span>
<span class="nt">preprocessing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">output_pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">  </span><span class="c1"># &quot;&quot; for noop, &quot;enhanced_&quot; for contrast, &quot;derotated_&quot; for derotation</span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">noop</span><span class="w">  </span><span class="c1"># Only one step should be active at a time</span>

<span class="c1"># Suite2p settings</span>
<span class="nt">suite2p_ops</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Acquisition parameters</span>
<span class="w">  </span><span class="nt">nplanes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">nchannels</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">fs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">  </span><span class="nt">tau</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>

<span class="w">  </span><span class="c1"># Registration settings</span>
<span class="w">  </span><span class="nt">do_registration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">nonrigid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="c1"># Custom registration parameters (our fork)</span>
<span class="w">  </span><span class="nt">refImg_min_percentile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">refImg_max_percentile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">99</span>

<span class="w">  </span><span class="c1"># ROI detection</span>
<span class="w">  </span><span class="nt">roidetect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">anatomical_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="c1"># SLURM settings</span>
<span class="nt">use_slurm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">slurm</span><span class="p">:</span>
<span class="w">  </span><span class="nt">slurm_partition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpu&quot;</span>
<span class="w">  </span><span class="nt">mem_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32000</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
<p>For the complete configuration file with all available parameters and detailed comments, see <a class="reference external" href="https://github.com/neuroinformatics-unit/photon-mosaic/blob/main/photon_mosaic/workflow/config.yaml">photon_mosaic/workflow/config.yaml</a> or the YAML file in <code class="docutils literal notranslate"><span class="pre">~/.photon_mosaic/config.yaml</span></code> generated on first run.</p>
</section>
<section id="key-configuration-notes">
<h2>Key Configuration Notes<a class="headerlink" href="#key-configuration-notes" title="Link to this heading">#</a></h2>
<section id="dataset-discovery">
<h3>Dataset Discovery<a class="headerlink" href="#dataset-discovery" title="Link to this heading">#</a></h3>
<p>See the <a class="reference internal" href="dataset_discovery.html"><span class="std std-doc">dataset discovery documentation</span></a> for detailed information about configuring dataset discovery.</p>
</section>
<section id="preprocessing">
<h3>Preprocessing<a class="headerlink" href="#preprocessing" title="Link to this heading">#</a></h3>
<p>See the <a class="reference internal" href="preprocessing.html"><span class="std std-doc">preprocessing documentation</span></a> for step-specific configuration</p>
</section>
<section id="suite2p-parameters">
<h3>Suite2p Parameters<a class="headerlink" href="#suite2p-parameters" title="Link to this heading">#</a></h3>
<p>The configuration includes all standard Suite2p parameters plus custom additions:</p>
<section id="custom-registration-parameters">
<h4>Custom Registration Parameters<a class="headerlink" href="#custom-registration-parameters" title="Link to this heading">#</a></h4>
<p>Our fork includes additional parameters for improved registration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">refImg_min_percentile</span></code>: Minimum percentile for reference image selection (default: 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refImg_max_percentile</span></code>: Maximum percentile for reference image selection (default: 99)</p></li>
</ul>
<p>These parameters control contrast normalization during registration and are especially useful for low SNR datasets like three-photon imaging.</p>
</section>
<section id="cell-detection">
<h4>Cell Detection<a class="headerlink" href="#cell-detection" title="Link to this heading">#</a></h4>
<p>To use Cellpose for cell detection, set <code class="docutils literal notranslate"><span class="pre">anatomical_only</span></code> to a value greater than 0:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">suite2p_ops</span><span class="p">:</span>
<span class="w">  </span><span class="nt">anatomical_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w">  </span><span class="c1"># Use maximum projection image for cell detection</span>
</pre></div>
</div>
<p>Choose the value of <code class="docutils literal notranslate"><span class="pre">anatomical_only</span></code> based on the following table:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Use max projection image divided by mean image</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Use mean image</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Use enhanced mean image</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Use maximum projection image</p></td>
</tr>
</tbody>
</table>
</div>
<p>For a complete list of all available Suite2p parameters, refer to the <a class="reference external" href="https://suite2p.readthedocs.io/en/latest/settings.html">official Suite2p documentation</a>.</p>
</section>
<section id="cellpose-3-vs-cellpose-4">
<h4>Cellpose 3 vs Cellpose 4<a class="headerlink" href="#cellpose-3-vs-cellpose-4" title="Link to this heading">#</a></h4>
<p>Photon-mosaic uses Cellpose 4 by default, with <code class="docutils literal notranslate"><span class="pre">cpsam</span></code> model. If you want to use Cellpose 3, you can uninstall the Cellpose 4 from your conda environment and install Cellpose 3: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">cellpose</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cellpose==3.0.0</span></code>. In such a case remember to change the <code class="docutils literal notranslate"><span class="pre">flow_threshold</span></code> to 1.5.</p>
</section>
</section>
<section id="slurm">
<h3>SLURM<a class="headerlink" href="#slurm" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">use_slurm</span></code>: Enable/disable SLURM job scheduling (default: false)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slurm_partition</span></code>: Compute partition to use</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mem_mb</span></code>: Memory allocation per job</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tasks</span></code>: Number of parallel tasks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nodes</span></code>: Number of compute nodes</p></li>
</ul>
<p>In order for SLURM jobs to be executed, you have to launch <code class="docutils literal notranslate"><span class="pre">photon-mosaic</span></code> inside an environment in an interactive job in your cluster.</p>
<p>For more details about SLURM configuration options, see the <a class="reference external" href="https://github.com/snakemake/snakemake-executor-plugin-slurm">Snakemake SLURM executor plugin documentation</a>.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-files">Configuration Files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-configuration">User Configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-structure">Configuration Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-configuration-notes">Key Configuration Notes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-discovery">Dataset Discovery</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocessing">Preprocessing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#suite2p-parameters">Suite2p Parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-registration-parameters">Custom Registration Parameters</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cell-detection">Cell Detection</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cellpose-3-vs-cellpose-4">Cellpose 3 vs Cellpose 4</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm">SLURM</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neuroinformatics.dev/">
        <img src="../_static/light-logo-niu.png" alt="NIU" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-niu.png" alt="NIU" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../_static/light-logo-swc.png" alt="SWC" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-swc.png" alt="SWC" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../_static/light-logo-ucl.png" alt="UCL" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-ucl.png" alt="UCL" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>